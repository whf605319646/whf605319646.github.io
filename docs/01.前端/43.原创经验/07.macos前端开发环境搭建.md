---
title: macos前端开发环境搭建
date: 2021-12-28 17:45:31
permalink: /pages/03f556/
categories:
  - 前端
  - 原创经验
tags:
  - 
---

# macOS 前端开发环境搭建

<p align="center">
  <img src="https://cdn.jsdelivr.net/gh/whf605319646/image_store/assets/blog/macos.jpeg">
</p>

此篇文章适合初入macOS的同学，主要涉及一些基础性的环境搭建，包括node/npm/git/vscode/zsh等
<!-- more -->

## 写在前面
- 确保网络通畅
- 熟悉macOS快捷键及切换
- [macwk](https://macwk.com/)
- 必要的软件支持，例如 FastZip，解压缩

## 快捷键
一、Mac上常用的快捷键

Window用习惯了的用户会经常用到系统键和Ctrl键来进行快捷键的操作，Mac上的Command则一般与Window上的系统键和Ctrl键的功能相当。

- Command + Tab： 应用程序之间的切换

- Command + Option：同一应用程序不同窗口切换
- Command + H：隐藏窗口
- Command + M：最小化窗口
- Command + W：关闭页面窗口
- Command + Q：关闭应用程序
- Command + F3：显示桌面
- Command + Shift + 4：截图插件
- Command + Shift + 3：截当前屏幕
二、文本编辑常用快捷键
Fn + ↑ ：向上一页
Fn + ↓ ：向下一页
Fn + ←：文稿开头
Fn + →：文稿结尾
- Command + ←：本行开头
- Command + →：本行结尾
Option + ←：上一个单词末尾
Option + →：下一个单词末尾
- Ctrl + A：段落开头
- Command + C/V/X/A/S：复制/粘贴/剪切/全选/保存
- Command + Shift + S：另存为
- Command + Z：撤回
- Command + Shift + Z：逆向撤回（前进）
三、Xcode中常用的快捷键
- Command + 0：打开/关闭导航器面板
- Command + 1 ~ 8：对应导航器面板的各功能（Xcode左边栏的八项功能）
- Command + Shift + F：find，查找
- Command + Shift + O：快速查找并跳转和打开
- Command + Ctrl + ↑：.h、.m文件之间切换
- Ctrl + 6：显示当前目录下的子文件或者当前文档的函数名称进行快速定位和切换
- Command + R：不中断运行
- Command + B：构建
- Command + Shift + K：清除
- Command + Shift + 0（zero）：打开文档与帮助
Option + 双击 ：跳转到鼠标对应类或方法的文档
- Command + 单击：跳转到鼠标定位处的函数或类的定义处
- Ctrl + 1：弹出View选择面板，可以选择查看当前类的父类、子类 、调用类和被调用类等详细信息
- Command + Shift + Y：显示/隐藏调试区
- Command + .（点）：停止调试器
Option + ←：上一个单词末尾
Option + →：下一个单词末尾
- Command + Z：撤回
- Command + Shift + Z：逆向撤回（前进）

此外，用过Eclipse进行开发的程序员肯定很怀念复制到下一行的快捷键，很遗憾，Xcode中没有这样的快捷键，但是我们可以通过修改系统设置来进行设置。


## 禁用检验
对于开发者来说，比较简单的办法就是关闭信任检验，禁用Gatekeeper，执行如下命令：

```
$ sudo spctl --master-disable
```

## 开发环境

### vscode下载&安装
- [vscode加速下载](https://az764295.vo.msecnd.net/stable/899d46d82c4c95423fb7e10e68eba52050e30ba3/VSCode-darwin-universal.zip)

```
# 国内加速下载方案替换：
# 原链接：
https://vscode.cdn.azure.cn/stable/899d46d82c4c95423fb7e10e68eba52050e30ba3/VSCode-darwin-universal.zip
# 替换：
vscode.cdn.azure.cn =》az764295.vo.msecnd.net
# 替换后：
https://az764295.vo.msecnd.net/stable/899d46d82c4c95423fb7e10e68eba52050e30ba3/VSCode-darwin-universal.zip
```

### 安装HomeBrew
HomeBrew类似Linux下的 apt-get的包管理工具

[mac下镜像飞速安装Homebrew教程](https://zhuanlan.zhihu.com/p/90508170)

#### 国内安装遇到问题
由于国内访问github受限，所以如果按照[HomeBrew官方](https://brew.sh)安装，会遇到类似如下问题：
```
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
.....
curl: (7) Failed to connect to raw.githubusercontent.com port 443: Operation timed out
```

#### [解决方法](https://brew.idayer.com)：
```
/bin/bash -c "$(curl -fsSL https://cdn.jsdelivr.net/gh/ineo6/homebrew-install/install.sh)"
```
最后看到 ==> Installation successful! 就说明安装成功了

最后更新下：
```
brew update
```
#### 设置镜像

brew、homebrew/core是必备项目，homebrew/cask、homebrew/bottles按需设置。

通过 brew config 命令可以查看相关配置信息。

```
# 中科大源
git -C "$(brew --repo)" remote set-url origin https://mirrors.ustc.edu.cn/brew.git

git -C "$(brew --repo homebrew/core)" remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git

git -C "$(brew --repo homebrew/cask)" remote set-url origin https://mirrors.ustc.edu.cn/homebrew-cask.git

brew update
```
配置cask源可能会报错，暂时跳过

#### 设置bottles镜像

设置环境变量需要注意终端Shell的类型，请看下面说明：

镜像以中科大源为例。

从macOS Catalina(10.15.x) 版开始，Mac使用zsh作为默认Shell，对应文件是.zprofile，所以命令为：

```
echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles/bottles' >> ~/.zprofile
source ~/.zprofile
```

如果是macOS Mojave 及更低版本，并且没有自己配置过zsh，对应文件则是.bash_profile：

```
echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles/bottles' >> ~/.bash_profile
source ~/.bash_profile
```

注意：上述区别仅仅是.zprofile和.bash_profile不同，文章如有再次提及编辑.zprofile，均按此方法替换

#### 恢复默认源

```
git -C "$(brew --repo)" remote set-url origin https://github.com/Homebrew/brew.git

git -C "$(brew --repo homebrew/core)" remote set-url origin https://github.com/Homebrew/homebrew-core.git

git -C "$(brew --repo homebrew/cask)" remote set-url origin https://github.com/Homebrew/homebrew-cask.git

brew update
```
homebrew-bottles配置只能手动删除，将 ~/.zprofile 文件中的 HOMEBREW_BOTTLE_DOMAIN=https://mirrors.xxx.com内容删除，并执行 source ~/.zprofile

#### 卸载Homebrew
```
/bin/bash -c "$(curl -fsSL https://cdn.jsdelivr.net/gh/ineo6/homebrew-install/uninstall.sh)"
```

#### 参考链接
[中科大源](http://mirrors.ustc.edu.cn/help/index.html)

[清华大学源](https://mirror.tuna.tsinghua.edu.cn/help/homebrew/)

### nvm&node安装
nvm作为node版本管理工具，近年来已被广泛运用，但同样也是由于访问github受限，采用离线安装方式

- [nvm下载](https://github.com/nvm-sh/nvm/releases)

- nvm安装，解压缩nvm-master.zip包

```
# 调整相应脚本执行权限
chmod +x install.sh

# 执行安装
./install.sh 

# 执行后，根据提示修改脚本
touch ~/.bash_profile

# 编辑 bash_profile 
vim ~/.bash_profile

# 复制以下内容，粘贴到 bash_profile
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion

# 最后：ESC, 冒号，wq

# 刷新 bash_profile
source ~/.bash_profile

# 测试nvm是否安装成功
nvm --version

# 查看node可用版本
nvm ls-remote

# 安装对应node版本
nvm install v16.13.1

# 使用node
nvm use v16.13.1
```

### nrm安装
nrm是管理node镜像源的工具

```
# 查看镜像源列表
nrm ls

# 添加内网镜像源地址
nrm add cmschina http://artifacts.cmschina.com.cn/artifactory/api/npm/public-npm-rdm-remote/

# 使用镜像源
nrm use cmschina
```

### git 安装
需要预先安装好**HomeBrew**
```
brew install git
```
[配置多个ssh公钥](https://zhuanlan.zhihu.com/p/154604608)

注意事项：

在同时有多个git账号配置的时候，通常我们都会在~/.ssh文件夹下添加一个config文件，用来配置多个 git ，但是因为对 config 文件中的 Host 和 Hostname 理解不深入导致ssh -T git@xxx.com很久通不过。

在config中，Host在配置中是别名，Hostname是作为实际域名地址。所以在搞不清楚的时候，建议 Host 和 Hostname 设置的最好是一致的，就不用纠结区别了

另外，当 git 服务的端口不是默认的 22 的时候，可以通过 config 中配置 Port 属性来指定 git 服务的端口。
```
# 示例配置
# 码云
# 域名地址的别名
Host gitee
# 这个是真实的域名地址
Hostname gitee.com
# 配置使用用户名
User xxx@xx.com
# 这里是id_rsa的目录位置
IdentityFile ~/.ssh/id_rsa_gitee
# 默认是2222，如果是其他端口，一定要配置
Port 2222
```
### chrome 插件安装
需要科学上网，这里推荐 SetupVPN ，通过它可以访问到 Chorme应用市场

### xcode
通过AppStore安装 xcode,需要有 AppleID,登录后即可下载安装

### zsh 安装
[ohmyzsh](https://github.com/ohmyzsh/ohmyzsh)

[iTerm2+oh-my-zsh配色](https://www.jianshu.com/p/246b844f4449)

[解决 zsh: command not found: node](https://segmentfault.com/a/1190000020698274)

zsh 插件：

```
plugins: (
  git
  node
  npm
  yarn
  brew
  docker
  extract
  autojump
  z
  vscode
)
```
#### zsh 整合 vscode
mac下 使用vscode，有的时候使用 code 命令，用的zsh终端，会提示 command not found

在我们的`.zshrc`文件中加入如下代码：

解决方法：
```
function code {
 if [[ $# = 0 ]]
 then
 open -a "Visual Studio Code"
 else
 local argPath="$1"
 [[ $1 = /* ]] && argPath="$1" || argPath="$PWD/${1#./}"
 open -a "Visual Studio Code" "$argPath"
 fi
}
```

这样在zsh中我们可以使用下面的命令打开 Visual Studio Code
```
code . – 在 Visual Studio Code 中打开当前目录
code – 打开 Visual Studio Code
code somefile – 在 Visual Studio Code 中打开somefile
```