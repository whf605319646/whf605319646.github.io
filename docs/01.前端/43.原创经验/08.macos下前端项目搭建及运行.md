# macos下前端项目搭建及启动文档

## [前置环境](https://www.hfwang.win/pages/03f556/)

- node
- npm
- react-native `npm install -g react-native-cli`
- yarn
- cocoapods
- vscode
- xcode
- [oh-my-zsh](https://github.com/ohmyzsh/ohmyzsh/tree/master)
- [微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)

## 企管后台配置平台
通过该平台，实现对营销推广页面在小程序端、App端的动态配置化展示

- [仓库地址](http://codingcorp.devops.cmschina.com.cn/p/wealthplus/d/bms/git)

```
git clone http://e.devops.cmschina.com.cn/codingcorp/wealthplus/bms.git
```
- Vue技术栈
- node环境
- 安装npm依赖库
- 运行`npm run test`
- 待打开网页后，输入`13800000000/a123456`(用户名/密码)即可

`注意：此项目若对应分支上功能开发完毕，可将代码同步到test分支上，会自动触发测试环境自动化构建，构建成功后，会自动更新测试环境`

## 企微小程序
包含员工端、客户端，两个角色的功能页面

- [仓库地址](http://e.devops.cmschina.com.cn/codingcorp/wealthplus/wechat/git)

```
git clone http://e.devops.cmschina.com.cn/codingcorp/wealthplus/wechat.git
```
- react技术栈
- node环境
- 安装npm依赖库
- 添加本地环境文件`.env.local`，联系导师或供应商
- 运行`npm run start`
- 打开微信开发者工具后，输入访问页面的路由地址

`注意：有些页面有权限，若访问，需要屏蔽useIsSign相关方法`

## 财富+小程序

是一个纯粹的微信小程序，可打开微信开发者工具，直接导入项目

- [仓库地址](http://e.devops.cmschina.com.cn/codingcorp/wealthplus/miniapp/git)

```
git clone http://e.devops.cmschina.com.cn/codingcorp/wealthplus/miniapp.git
```
- node环境
- 安装npm依赖库
- 输入AppID（wx3203c41c1f67371f），云开发

## 财管APP

App端项目，依赖苹果系统，需要xcode开发环境

- [仓库地址](http://e.devops.cmschina.com.cn/codingcorp/wealthplus/wealthplus_app_base/git)

```
git clone http://e.devops.cmschina.com.cn/codingcorp/wealthplus/wealthplus_app_base.git
```
- node环境
- 安装npm依赖库
- xcode 在AppStore下载安装，安装成功后，最好调整路径，否则可能导致项目启动失败

```
# 输入下面的命令检查下错误所在
xcrun -k --sdk iphoneos --show-sdk-path

# 如果出现下面的内容，则说明我们的 XCode 路径错误
xcrun:_ error: SDK "iphoneos" cannot be located
xcrun: error: SDK "iphoneos" cannot be located
xcrun: error: unable to lookup item 'Path' in SDK 'iphoneos'

# 输入以下命令检查系统默认的 XCode 路径
xcode-select --print-path

# 输出结果一般如下
/Applications/Xcode.app/Contents/Developer

#如果不是这个则运行下面的命令变更 XCode 路径
xcode-select --switch /Applications/Xcode.app/Contents/Developer/
```
- cocoapods安装(ios依赖库管理工具，具体安装配置参考`前置环境`)

#### 启动项目
- 切换到 wealthplus_app_base目录下，找到 package.json 文件所在的目录，执行`npm install`
- 切换到 ios 文件夹下`cd ios`，而后，`yarn pod`,安装 项目所需苹果系统的依赖

`注意：yarn pod , 可能需要科学上网，才能下载安装成功依赖库，若安装依赖失败，请联系导师`

- `yarn pod` 安装成功后，执行打包脚本，具体可查看 package.json

```
# 打包 ios
npm run bundle:ios

# 运行ios端
npm run ios

# 打包 android
npm run bundle:android

# 运行Android端
npm run android
```

项目正常启动后，输入 `liumiao / Oa@test@2021` (用户名/密码)

- 具体功能开发完成后，若打包生产，可依据package.json中脚本执行